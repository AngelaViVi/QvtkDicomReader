# QvtkDicomReader

使用Qt和VTK编写的Dicom阅读器
===========================

#### Coming Soon
1.显示VTK缩略图,并能从缩略图中直接引导渲染器渲染对应的Series或者Image<br>
2.在renderwindow中显示4份图像<br>
3.在绘图区域中显示影像扫描时的人体方位<br>
4.添加面积测量工具<br>
5.调整依赖库的组织形式<br>
6.绘图区域中的文字添加显示/隐藏开关<br>
7.防呆<br>
8.三维重建,分割配准功能代码有大量bug等待修复<br>
9.程序外观的调整<br>
10.交互逻辑统一<br>
11.配准部分代码的入口构建和输出优化<br>
12.依赖要优化一下,现在的debug依赖到了Examples上,重新编译的itk至关重要<br>

#### 已知BUG
1.负片功能不好使<br>
2.自动播放功能由于涉及到对界面的操作,播放不流畅且会阻塞界面导致停止按钮不太好使<br>
3.当读取到有问题的DICOM图片时会出现VTK运行时错误窗口,但是并不会导致程序崩溃,任然可以继续正常使用<br>
4.数据库里面有一些字段的值是空的,考虑给数据那边增加日志输出,并通过DCMTK的日志确定这些字段的确切位置<br>
5.画面上显示的窗宽窗位不是实时的,需要从Viewer中获取以确保实时性,且应该在值更改之后刷新一下文字.为了实现这个,要先改值,再触发值更改<br>
6.复位功能不好使,考虑去掉在这个功能或者重新实现<br>
7.配准功能交互风格不统一且存在大量的字符串形式的绝对路径<br>
8.有一个进程在主进程退出之后没有退出<br>
9.打开DICOMDIR,三维重建,分割这三个子功能时速度非常慢,初始化代码需要优化<br>

#### 编程参考
编程中参考的软件:<br>
1.[Pmsdview](http://pmsdview-12.updatestar.com/)<br/>
2.[RadiAnt](https://www.radiantviewer.com/)<br/>
Pmsdview是由飞利浦开发的一个程序;RadiAnt是效率极高且功能完善的Dicom浏览器和PACS客户端<br>
这两个程序都是不开源的,本程序的编写中只是使用了这两个软件并借鉴了界面和一些功能.<br>

#### Features:
1.DCMTK-64读取DICOMDIR数据库并构造四层类结构存储结构<br>
2.用树视图显示数据库的结构<br>
3.移除了ITK的全部依赖<br>
4.DCMTK和VTK的依赖经过了整理<br>
5.控件的添加方式已经明确<br>
6.更新部分界面<br>
7.增加窗宽窗位功能,共有8种窗宽窗位模式可以选择<br>
8.添加三维重建功能,入口在:文件树->series节点的右键菜单<br>
9.添加图像分割功能,入口在:文件树->Image节点的右键菜单<br>
10.添加 图像配准功能,这个模块核心代码已经完工,但是入口和参数传递还没做.<br>

#### Build:
1.依赖:DCMTK3.6.2,64位;vtk8.0.0,64位;Qt5.9.1,64位;itk4.12,64位 <br>
2.依赖包放在解决方案文件夹的Libraries中<br>
3.[依赖下载地址](https://pan.baidu.com/s/1o8dyOFw) 密码：4c9l<br>
4.环境:Visual Studio 2017,v141工具集<br>
5.若运行时缺少DLL,请检查相关的环境变量是否正确,或者找到这个dll并放在解决方案文件夹的x64/debug或x64/release文件夹中<br>
6.[测试数据](https://pan.baidu.com/s/1i5xROTB) 密码：qepn<br>
